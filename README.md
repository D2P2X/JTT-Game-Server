# 단체 모임을 위한 아이스브레이킹 게임 앱 프로젝트 🎉

이 프로젝트는 **단체 모임에서 어색한 분위기를 깨고 사람들 간의 교류를 촉진할 수 있는 아이스브레이킹 게임 앱**을 목표로 합니다. 참가자들이 실시간으로 참여할 수 있는 게임을 통해 서로 자연스럽게 소통하고 어울릴 수 있도록 하며, 재미와 흥미를 유도하는 다양한 게임을 제공합니다.

이 프로젝트는 **FastAPI**, **PostgreSQL**, **Flutter**로 구성된 기술 스택을 사용하여 구현되었습니다. 또한 **비동기 처리**를 통해 다수의 사용자가 동시에 참여할 때도 원활한 성능을 유지할 수 있습니다.


## 기술 스택

- **백엔드**: FastAPI
- **데이터베이스**: PostgreSQL
- **프론트엔드**: Flutter

## 기술 선택 이유

### FastAPI

**FastAPI**는 빠른 성능과 **비동기 처리**를 기본으로 지원해, 다수 사용자가 동시에 참여하는 게임 앱에 적합합니다. Flask 대신 FastAPI를 선택한 이유는 다음과 같습니다.

1. **비동기 지원**: 실시간 상호작용과 빠른 응답성을 보장합니다.
2. **고성능**: 웹소켓과 비동기 요청을 최적화하여 원활한 실시간 통신을 지원합니다.
3. **간편한 유효성 검사**: Pydantic을 활용한 데이터 모델링과 유효성 검사를 통해 요청 데이터의 신뢰성을 보장합니다.
4. **확장성**: 모듈화된 코드 구조로 새로운 게임 기능을 손쉽게 추가할 수 있습니다.

### PostgreSQL

데이터베이스로는 **PostgreSQL**을 사용하여 게임 데이터의 **관계형 구조**와 **확장성**을 효과적으로 관리합니다. MySQL 대신 PostgreSQL을 선택한 이유는 다음과 같습니다.

1. **관계형 데이터 처리**: 사용자, 게임 기록, 순위 등 다양한 데이터 관계를 유연하게 모델링합니다.
2. **복잡한 쿼리 처리**: 집계 및 순위 계산 등의 복잡한 쿼리를 효과적으로 처리해 게임 결과와 랭킹 기능을 구현합니다.
3. **확장성과 안정성**: 대규모 데이터와 복잡한 트랜잭션을 안정적으로 관리할 수 있습니다.
4. **JSON 지원**: 비정형 데이터 저장이 가능해 게임 설정이나 사용자 정보를 유연하게 관리할 수 있습니다.

### Flutter

프론트엔드로는 **Flutter**를 사용해 iOS와 Android에서 모두 매끄럽게 작동하는 반응성 높은 UI를 제공합니다.

1. **다중 플랫폼 지원**: 하나의 코드베이스로 iOS와 Android 앱을 동시에 개발합니다.
2. **고성능 UI**: Flutter의 엔진으로 매끄러운 애니메이션과 빠른 응답성을 제공해 인터랙티브한 게임 경험을 만듭니다.
3. **빠른 개발**: `hot reload` 기능으로 즉각적인 UI 피드백이 가능해 개발 속도가 향상됩니다.
4. **확장성**: 커스텀 위젯을 쉽게 만들 수 있어 새로운 기능을 확장하기 용이합니다.

### 비동기 처리의 장점

이 프로젝트는 **비동기 처리**를 통해 다수의 사용자가 동시에 참여해도 빠른 응답성과 안정적인 성능을 제공합니다. FastAPI의 비동기 기능을 통해 실시간 요청이 많은 게임 환경에서도 자연스럽고 원활한 상호작용을 지원합니다.

---

### 📂 프로젝트 구조

```plaintext
app/
│
├── .env               # 환경 변수 파일 
|
├── main.py             # FastAPI 애플리케이션 실행의 진입점
│
├── core/               # 설정 및 애플리케이션 수명 주기 이벤트 처리
│   ├── config.py       # 설정 파일 (환경 변수, 데이터베이스 URL 등)
│   └── startup.py      # 애플리케이션 lifespan 이벤트 핸들러
│
├── db/                 # 데이터베이스 관련 설정과 모델 정의
│   ├── database.py     # 데이터베이스 연결 설정 및 관리
│   └── models.py       # SQLAlchemy로 데이터베이스 테이블 정의
│
├── models/             # Pydantic 데이터 모델 정의 (요청/응답)
│   ├── user.py         # 사용자 데이터 모델 (요청 및 응답 데이터 유효성 검사)
│   └── response.py     # 공통 응답 데이터 모델 정의
│
├── routers/            # API 라우트 정의, 기능별로 분리하여 관리
│   ├── database_api.py # 데이터베이스 관련 API 라우트 정의
│   ├── user_api.py     # 사용자 관련 API 라우트 정의
│   └── test_api.py     # API 테스트용 라우트 정의
│    
└── services/           # 서비스 로직, 비즈니스 로직을 관리
    ├── database_service.py # 데이터베이스 관련 서비스 (초기화 및 상태 확인)
    └── user_service.py     # 사용자 데이터베이스 서비스 (추가 및 조회)
```

---

### 📄 주요 파일 및 디렉토리 설명

- **\`app/main.py\`**
  - **역할**: FastAPI 애플리케이션을 실행하는 진입점입니다.
  - **기능**: FastAPI 객체를 생성하고 \`routers/\` 디렉토리에 정의된 각 라우트를 애플리케이션에 등록합니다. \`uvicorn\`으로 서버를 시작할 수 있습니다.

- **\`app/core/\`**
  - **구성 요소**:
    - **\`config.py\`**: 애플리케이션 설정 파일로, 환경 변수와 설정을 중앙에서 관리합니다.
    - **\`startup.py\`**: FastAPI의 **수명 주기 이벤트 핸들러**로, 애플리케이션 시작 시 데이터베이스 연결을 열고, 종료 시 닫는 등의 작업을 정의합니다.

- **\`app/db/\`**
  - **구성 요소**:
    - **\`database.py\`**: 데이터베이스와의 비동기 연결을 설정하는 파일입니다. \`Database\` 객체를 생성하여 서비스 계층에서 활용할 수 있도록 합니다.
    - **\`models.py\`**: 데이터베이스의 \`users\` 테이블과 같은 구조를 SQLAlchemy 모델로 정의하여, 데이터베이스 작업 시 해당 모델을 사용할 수 있도록 합니다.

- **\`app/models/\`**
  - **구성 요소**:
    - **\`user.py\`**: 사용자 데이터를 위한 **Pydantic 모델**을 정의합니다. API 요청 및 응답의 데이터 유효성 검사를 수행합니다.
    - **\`response.py\`**: 공통 응답 모델을 정의하여, API에서 일관된 응답 구조를 유지할 수 있게 합니다.

- **\`app/routers/\`**
  - **구성 요소**:
    - **\`database_api.py\`**: 데이터베이스와 관련된 API 라우트를 정의합니다. 데이터베이스 초기화, 상태 확인 등의 엔드포인트가 포함됩니다.
    - **\`user_api.py\`**: 사용자와 관련된 API 라우트를 정의합니다. 예를 들어, 사용자 추가 및 조회 기능을 제공하는 엔드포인트가 있습니다.
    - **\`test_api.py\`**: 개발 및 테스트용 라우트를 정의하는 파일로, 테스트 목적으로 임시 엔드포인트를 작성하는 데 사용할 수 있습니다.

- **\`app/services/\`**
  - **구성 요소**:
    - **\`database_service.py\`**: 데이터베이스와 상호작용하는 비즈니스 로직을 포함하며, 데이터베이스 초기화, 상태 확인과 같은 작업을 수행합니다.
    - **\`user_service.py\`**: 사용자 데이터베이스 작업을 수행하는 서비스로, 사용자 추가, 사용자 조회 등의 비즈니스 로직을 포함합니다.

---

### 🧩 모듈화 및 확장성

이 프로젝트 구조는 **모듈화**와 **확장성**을 고려하여 구성되었습니다. 각 기능별로 파일을 나누어 코드의 가독성과 유지보수성을 높이며, 프로젝트가 커지더라도 쉽게 관리할 수 있습니다.

- **라우터 모듈화**: 모든 API 라우트를 \`routers\` 디렉토리에 분리하여 관리하며, \`include_router\`로 \`main.py\`에 등록합니다.
- **서비스 계층 분리**: 데이터베이스와의 상호작용과 같은 비즈니스 로직을 \`services\` 디렉토리에 분리하여 재사용성을 높이고 유지보수가 용이합니다.
- **설정 중앙화**: 환경 설정과 수명 주기 이벤트를 \`core\` 디렉토리에서 중앙 관리하여, 애플리케이션의 설정을 쉽게 변경할 수 있습니다.

---

### 🔧 실행 방법


### 🔧 실행 방법

1. **프로젝트 디렉토리 이동**:  
   FastAPI 서버를 실행하기 위해 프로젝트의 루트 디렉토리(`~/app`)로 이동합니다.

   ```bash
   cd ~/app
   ```

2. **`.env` 파일 추가**:  
   프로젝트 루트 디렉토리에 `.env` 파일을 생성하고, 다음과 같은 값을 입력합니다:

   ```plaintext
   DATABASE_URL=postgresql://{username}:{password}@localhost:{port}/{databaseName}
   APP_NAME=MyIceBreakingGameApp
   DEBUG_MODE=False
   ```

3. **서버 실행**:  
   프로젝트 디렉토리에서 다음 명령어를 실행하여 서버를 시작합니다:

   ```bash
   python main.py
   ```

   서버가 성공적으로 실행되면 아래와 같은 메시지가 출력됩니다:

   ```
   INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
   ```

---

### 📌 추가 참고 사항

- **`.env` 파일 위치**:  
  `.env` 파일은 반드시 프로젝트의 루트 디렉토리(`~/app`)에 위치해야 합니다.

- **Python 및 패키지 확인**:  
  Python 3.9 이상을 사용하고, 필요한 패키지가 설치되어 있는지 확인하세요. 패키지가 설치되지 않은 경우, 다음 명령어를 실행하세요:

  ```bash
  pip install -r requirements.txt
  ```

- **서버 확인**:  
  서버 실행 후 브라우저에서 [http://127.0.0.1:8000](http://127.0.0.1:8000)를 열어 서버가 정상적으로 실행되었는지 확인하세요.

---

### 📌 추가 참고 사항

- **`.env` 파일 위치**:  
  `.env` 파일은 반드시 프로젝트의 루트 디렉토리(`~/app`)에 위치해야 합니다.

- **Python 및 패키지 확인**:  
  Python 3.9 이상을 사용하고, 필요한 패키지가 설치되어 있는지 확인하세요. 패키지가 설치되지 않은 경우, 다음 명령어를 실행하세요:

  ```bash
  pip install -r requirements.txt
  ```

- **서버 확인**:  
  서버 실행 후 브라우저에서 [http://127.0.0.1:8000](http://127.0.0.1:8000)를 열어 서버가 정상적으로 실행되었는지 확인하세요.



---

### 🤝 기여 및 개발자 가이드

이 프로젝트에 기여하거나 수정하려면 다음 가이드를 따릅니다:

- **라우터 추가**:
  - `routers` 디렉토리에 라우터 파일을 작성하고, `main.py`에 등록합니다.

- **비즈니스 로직 추가**:
  - 데이터베이스와 상호작용하는 코드는 `services` 디렉토리에 파일을 작성하여 관리합니다.

- **데이터 모델 정의**:
  - `models` 디렉토리에 Pydantic 모델을 정의하여 요청 및 응답의 유효성을 검사합니다.

이 프로젝트 구조는 코드의 재사용성과 확장성을 고려하여 설계되었으며, 대규모 프로젝트에서도 쉽게 확장할 수 있는 구조를 갖추고 있습니다. 😊
